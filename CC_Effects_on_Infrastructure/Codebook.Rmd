## 1. Project Overview

**Title:** Exploring the Relationship between Natural Hazards and Social Infrastructure\
**Author(s):** Ryan Hughes, and Tim Fraser\
**Date:** 09-Oct-2025\
**Version:** 1.0\
**Repository:** [GitHub link]

### Description



------------------------------------------------------------------------

## 2. Code and Functions

| Script | Description | Input(s) | Output(s) |
|------------------|------------------|------------------|------------------|
| `Data_Import_and_Filtering.R` | Demonstrates how the 'Filtered_Datasets' were made, and facilitates replication. | raw CSV | cleaned CSV |
| `Linear_Model_Anaysis.R` | Fits A supplemental analysis creating a direct linear model of the relationship between NANDA and NRI | cleaned CSV | model summary, coefficients |
| `Descriptive_Statistics.R` | Simple descriptive statistics including the average infrastructure density per capita, NRI risk, infrastructure density per sq. mile and corresponding standard deviations. | model summary | PNG figures |
| `Simulation_Anaysis.R` | A simulation linear model of the relationship between NANDA and NRI. | model summary | PNG figures |


## 3. Data Dictionary

**Dataset:** `Descriptive_Statistics.R -> stats_den`

The data variable combines information taken from both the NANDA and NRI filtered datasets (i.e., The Filtered_Dataset\_... .rds files are loaded in as: "data1", "data2", and "data3" then combined) such that all essential information is contained within a single dataframe.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor (CRF) | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss (EAL) | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |

**Dataset:** `Descriptive_Statistics.R -> stats_aden`

The data variable combines information taken from both the NANDA and NRI filtered datasets (i.e., The Filtered_Dataset\_... .rds files are loaded in as: "data1", "data2", and "data3" then combined) such that all essential information is contained within a single dataframe.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor (CRF) | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss (EAL) | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |

**Dataset:** `Descriptive_Statistics.R -> stats_coef_Infr`

The data variable combines information taken from both the NANDA and NRI filtered datasets (i.e., The Filtered_Dataset\_... .rds files are loaded in as: "data1", "data2", and "data3" then combined) such that all essential information is contained within a single dataframe.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor (CRF) | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss (EAL) | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |

**Dataset:** `Descriptive_Statistics.R -> stats_coef_cities`

The data variable combines information taken from both the NANDA and NRI filtered datasets (i.e., The Filtered_Dataset\_... .rds files are loaded in as: "data1", "data2", and "data3" then combined) such that all essential information is contained within a single dataframe.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor (CRF) | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss (EAL) | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |

**Dataset:** `Simulation_Analysis.R -> data`

The data variable combines information taken from both the NANDA and NRI filtered datasets (i.e., The Filtered_Dataset\_... .rds files are loaded in as: "data1", "data2", and "data3" then combined) such that all essential information is contained within a single dataframe.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor (CRF) | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss (EAL) | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |

**Dataset:** `Simulation_Analysis.R -> points`

The points variable contains the information created from a simulation of the linear model performed on the "data" variable. There are several versions of "points" to explore different inputs within the simulator. "\_x" varies the count of sites added, "\_area" varies the infrastructure density per sq. mile of sites, "\_crf" varies the community risk factor, "\_den" varies the infrastructure density per capita, "\_pop" varies the population directly and, "\_x_hicrf" and"\_x_lowcrf" explore the count of sites added at high and low crf respectively.

| Variable | Type | Description | Units | Source | Notes |
|------------|------------|------------|------------|------------|------------|
| `year` | numeric | Year represented | year | NANDA & NRI | 2020 is the most recent date from which there is applicable data from both datasets |
| `city` | character | City represented | NA | Census Shapefiles | Cleaned; no missing |
| `county` | character | County represented | NA | Census Shapefiles | Values: “control”, “treatment” |
| `geoid` | integer | Census Tract ID | NA | NANDA & NRI | Cleaned; no missing |
| `risk` | numeric | NRI Risk Value | NA | NRI | Cleaned; no missing |
| `crf` | numeric | NRI Community Risk Factor | NA | NRI | Cleaned; no missing |
| `eal` | numeric | NRI Estimated Annual Loss | USD2020 | NRI | Cleaned; no missing |
| `type` | character | NANDA Social Infrastructure Type | NA | NANDA | Cleaned; no missing |
| `count` | numeric | NANDA Social Infrastructure Count | NA | NANDA | Cleaned; no missing |
| `pop` | numeric | NRI Recorded Population | Persons | NRI | Cleaned; no missing |
| `den` | numeric | NANDA Social Infrastructure Density per Capita | Sites per capita | NANDA | Cleaned; no missing |
| `aden` | numeric | NANDA Social Infrastructure Density per Sq. Mile | Sites per Sq. Mile | NANDA | Cleaned; no missing |
| `category` | character | NANDA Social Infrastructure General Category | NA | Derived from NANDA | Cleaned; no missing |
| `area` | numeric | Census Tract Area | Sq. Mile | Census Shapefiles | Cleaned; no missing |
| `any` | Logical | Check if there's any social infrastruture in Census Tract | Boolean | Derived from NANDA | Cleaned; no missing |
| ... | ... | ... | ... | ... | ... |

------------------------------------------------------------------------

## 4. Software & Environment

| Tool        | Version | Purpose                           |
|-------------|---------|-----------------------------------|
| R           | 4.4.2   | Statistical Analysis              |
| sf          | 4.3.2   | Spatial Data                      |
| tigris      | 4.3.2   | U.S. Census TIGER/Line Shapefiles |
| stringr     | 4.3.2   | String Manipulation               |
| tidyverse   | 4.3.2   | Data Wrangling                    |
| broom.mixed | 4.3.2   | Tidying Model Output              |
| readr       | 4.3.2   | Data Import                       |
| dplyr       | 4.3.2   | Data Transformation               |
| data.table  | 4.3.2   | Data Manipulation                 |
| patchwork   | 4.3.2   | To create combined plots          |
| lggallin    | 4.3.2   | Plot Scales                       |
| ggplot2     | 4.3.2   | Create Ribbon Plots               |
| units       | 4.3.2   | Handling Physical Units           |

### Reproducibility

-   **Environment file:** `environment.yml` or `requirements.txt`

-   

    ## **System info:** Windows 11 x64, CPU, memory

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## GitHub Documents

This is an R Markdown format used for publishing markdown documents to GitHub. When you click the **Knit** button all R code chunks are run and a markdown file (.md) suitable for publishing to GitHub is generated.

## Including Code

You can include R code in the document as follows:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
